
 var commands = {
 off: [    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.9,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    104.3,    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.9,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8   ],
 on: [    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.9,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    1.6,    0.7,    1.6,    0.7,    104.3,    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.9,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    1.6,    0.7,    1.6,    0.7,    0.8   ], 
 oscilate: [    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    1.6,    0.7,    104.3,    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    1.6,    0.7,    0.8   ],
 oscilateOff: [    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    104.3,    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8   ],
 slow: [    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    1.6,    0.7,    1.6,    0.7,    1.6,    0.7,    1.6,    0.7,    1.6,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    104.3,    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    1.6,    0.7,    1.6,    0.7,    1.6,    0.7,    1.6,    0.7,    1.6,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8   ],  
 fast: [    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.9,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    104.3,    2.2,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.8,    0.7,    0.9,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8,    0.7,    1.6,    0.7,    0.8   ]
 }
 
function sendIR(array) {
  Puck.write('Puck.IR(['+array+']);\n')
}

function onInit() {
  // Leave 30 seconds before the speaker becomes
  // unconnectable via the Web IDE.
  setTimeout(function() {
    NRF.setServices({
      "5c02000124f80e9c425c263166152320" : {
        "5c02000224f80e9c425c263166152320" : {
          writable : true,
          onWrite : function(evt) {
            var cmd = evt.data[0];
            if (cmd===0) sendIR(commands.off);
            else if (cmd==1) sendIR(commands.off);
            else if (cmd==2) sendIR(commands.oscilate);
            else if (cmd==3) sendIR(commands.oscilateOff);
            else if (cmd==4) sendIR(commands.slow);
            else if (cmd==5) sendIR(commands.fast);
          }
        }
      }
    //},{uart:false});
    });
    NRF.setAdvertising({},{name:"dysonFan"});
  }, 30*1000);
}
